add_namespace = HRE_event

#шаблон
#country_event = {
#	id = HRE_events.
#	title = HRE_events..t
#	desc = HRE_events..d
#	#picture = 

#	is_triggered_only = yes

#	option = {
#		name = HRE_events..a

#	}

#	option = {
#		name = HRE_events..b

#	}
#}

country_event = { #Ивент у Совка
	id = HRE_event.1
	title = HRE_event.1.t
	desc = HRE_event.1.d
	#picture = 

	is_triggered_only = yes

	option = { #Поделиться территорией
		name = HRE_event.1.a
		GER = {
			country_event = {id = HRE_event.2}
			add_opinion_modifier = {
				target = SOV
				modifier = sov_offers_to_split
			}
		}
		CZE = {
			country_event = {id = HRE_event.2}
			add_opinion_modifier = {
				target = SOV
				modifier = sov_offers_to_split
			}
		}
	}
	

	option = { #Забрать свои территории
		name = HRE_event.1.c
		add_political_power = -50
		POL = {country_event = {id = HRE_event.4}}
	}

	option = { #Забрать всю Польшу
		name = HRE_event.1.e
		add_political_power = -100
		set_country_flag = take_all_of_Poland
		POL = {country_event = {id = HRE_event.4}}
	}
}

country_event = { #Приглашение к разделу
	id = HRE_event.2
	title = HRE_event.2.t
	desc = HRE_event.2.d
	#picture = 

	is_triggered_only = yes

	immediate = {
		clr_country_flag = agreed_to_split
		clr_country_flag = disagreed_to_split
	}

	option = { #Принятие
		name = HRE_event.2.a
		set_country_flag = agreed_to_split
		SOV = {country_event = {id = HRE_event.3}}
		ai_chance = {base = 50}
		log = "[ROOT.GetName]: принятие"
	}

	option = { #Отказ
		name = HRE_event.2.b
		set_country_flag = disagreed_to_split
		SOV = {country_event = {id = HRE_event.3}}
		ai_chance = {base = 50}
		log = "[ROOT.GetName]: отказ"
	}
}

country_event = { #ответ от стран
	id = HRE_event.3
	title = HRE_event.3.t
	desc = {
		trigger = {FROM = {has_country_flag = agreed_to_split}}
		text = HRE_event.3.d1
	}
	desc = {
		trigger = {FROM = {has_country_flag = disagreed_to_split}}
		text = HRE_event.3.d2
	}
	
	#picture = 
	is_triggered_only = yes

	option = {name = HRE_event.3.a}
}


country_event = { #ультиматум Польше
	id = HRE_event.4
	title = HRE_event.4.t
	desc = {
		trigger = {
			OR = {
				GER = {has_country_flag = agreed_to_split}
				CZE = {has_country_flag = agreed_to_split}
			}
		}
		text = HRE_event.4.d2
	}
	desc = HRE_event.4.d1
	#picture = 

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		AND = {
			GER = {
				OR = {
					has_country_flag = agreed_to_split
					has_country_flag = disagreed_to_split
				}
			}
			CZE = {
				OR = {
					has_country_flag = agreed_to_split
					has_country_flag = disagreed_to_split
				}
			}
		}
	}

	option = {
		ai_chance = {base = 100}
		name = HRE_event.4.a
		IF = {
			limit = {
				AND = {
					GER = {
						OR = {
							has_country_flag = agreed_to_split
							has_country_flag = disagreed_to_split
						}
					}
					CZE = {
						OR = {
							has_country_flag = agreed_to_split
							has_country_flag = disagreed_to_split
						}
					}
				}
			}
			log = "[ROOT.GetName]: сработало"
		}
		IF = {
			limit = {GER = {has_country_flag = agreed_to_split}}
			GER = {
				country_event = {id = HRE_event.5}

				transfer_state = 85
				transfer_state = 86
				transfer_state = 762
				transfer_state = 807
			}
		}
		IF = {
			limit = {CZE = {has_country_flag = agreed_to_split}}
			CZE = {
				country_event = {id = HRE_event.5}

				transfer_state = 88
				transfer_state = 89
				transfer_state = 91
			}
		}
		SOV = {
			country_event = {id = HRE_event.5}
			IF = {
				limit = {has_country_flag = take_all_of_Poland}
				POL = {
					every_core_state = {
						transfer_state_to = SOV
					}
				}
		    }
			ELSE = {
				transfer_state = 10
				transfer_state = 87
				transfer_state = 90
				transfer_state = 92
				transfer_state = 93
				transfer_state = 94
				transfer_state = 95
				transfer_state = 96
				transfer_state = 97
				transfer_state = 98
				transfer_state = 784
			}
		}
	}

	option = {
		name = HRE_event.4.b
		SOV = {
            country_event = {id = HRE_event.6}
			create_wargoal = {
				type = take_core_state
				target = POL
			}
        }
	}
}

country_event = { #Польша приняла ультиматум
	id = HRE_event.5
	title = HRE_event.5.t
	desc = HRE_event.5.d
	#picture = 

	is_triggered_only = yes
	fire_only_once = yes

	option = {name = HRE_event.5.a}
}

country_event = { #Польша отвергла ультиматум
	id = HRE_event.6	
	title = HRE_event.6.t
	desc = HRE_event.6.d
	#picture = 

	is_triggered_only = yes
	fire_only_once = yes

	option = {name = HRE_event.6.a}
}

# Ультиматум Турции по Стамбулу
country_event = {
    id = HRE_event.7
    title = HRE_event.7.t
    desc = HRE_event.7.d
    #picture = GFX_report_event_soviet_soldiers_tank

    is_triggered_only = yes
    
    option = { #Отдать Стамбул
        name = HRE_event.7.a
        SOV = {
            transfer_state = 797
            country_event = {id = HRE_event.8}
        }
    }

    option = { #Отказаться
        name = HRE_event.7.b
        SOV = {
            create_wargoal = {
                type = take_state_focus
                target = TUR
                generator = {797}
            }
            country_event = {id = HRE_event.9}
        }
    }
}

# Турция согласилась отдать Стамбул
country_event = {
    id = HRE_event.8
    title = HRE_event.8.t
    desc = HRE_event.8.d
    picture = GFX_report_event_soviet_soldiers_tank

    is_triggered_only = yes

    option = {
		name = HRE_event.8.a
		effect_tooltip = {transfer_state = 797}
	}
}

# Турция отказалась отдать Стамбул
country_event = {
    id = HRE_event.9
    title = HRE_event.9.t
    desc = HRE_event.9.d
    picture = GFX_report_event_soviet_soldiers_tank

    is_triggered_only = yes

    option = {
		name = HRE_event.9.a
		effect_tooltip = {
			create_wargoal = {
                type = take_claimed_state
                target = TUR
                generator = {797}
            }
		}
	}
}
country_event = {
	id = HRE_event.10
	title = event_title.10.t
	desc = event_desc.10.d
	#picture = GFX_event_picture

	is_triggered_only = yes

	option = {
		name = HRE_event.10.a
		add_political_power = 50
		add_stability = -0.05
		add_war_support = -0.05
	}
}

country_event = {
	id = HRE_event.11
	title = HRE_event.11.t
	desc = HRE_event.11.d
	picture = GFX_report_event_soviet_soldiers_tank

	is_triggered_only = yes

	option = {
		name = HRE_event.11.a
		ai_chance = {base = 70}
		SOV = {
			country_event = { id = HRE_event.12 }
		}
		if = {
			limit = { country_exists = BUL }
			SOV = { 
				annex_country = { target = BUL transfer_troops = yes }
			}
		}
		hidden_effect = {
			news_event = { id = news.1 hours = 6 }
		}
	}

	option = {
		name = HRE_event.11.b
		ai_chance = {base = 30}
		SOV = {
			country_event = { id = HRE_event.13 hours = 24 }
		}
		add_opinion_modifier = { 
			target = SOV 
			modifier = SOV_rejected_union
		}
		hidden_effect = {
			country_event = { id = HRE_event.14 days = 7 }
		}
		
		# Новый ивент для последствий отказа
		country_event = {
			id = HRE_event.14
			title = HRE_event.14.t
			desc = HRE_event.14.d
			picture = GFX_report_event_soviet_tanks
			
			is_triggered_only = yes
			
			option = {
				name = HRE_event.14.a
				add_stability = -0.05
				add_war_support = 0.05
				SOV = {
					add_opinion_modifier = { 
						target = ROOT
						modifier = SOV_angry_at_rejection
					}
				}
			}
		}
	}
}